# 系统分析类说明文档

| 类型 | 类名 | 职责 | 出处 |
| :--- | :--- | :--- | :--- |
| **边界类** | RoomCreationUI | 1. 接收创建者填写的初始信息（名称、上限、密码、公告）<br>2. 提供"发起社交影院放映"入口 | "系统提示放映厅创建者填写房间初始信息"；"放映厅创建者选择'发起社交影院放映'" |
| | RoomManagementUI | 1. 展示房间界面及管理功能<br>2. 提供设置片源、开始播放、解散房间操作入口 | "系统向放映厅创建者展示房间界面以及房间管理面板"；"放映厅创建者在房间内选择'设置片源'等" |
| | RoomJoiningUI | 1. 接收加入请求和昵称输入<br>2. 处理身份验证提示 | "观众通过列表/房间号发起加入请求，输入昵称"；"系统对观众执行身份校验" |
| | VideoPlayerUI | 1. 展示播放界面，接收同步指令<br>2. 调节本地播放属性（音量、全屏等） | "观众客户端加载资源并将进度设置到VideoState指定点"；"观众客户端应用本地属性" |
| | VideoSourceSettingUI | 接收创建者输入的外部视频链接 | "放映厅创建者在房间内选择'设置片源'，并输入外部视频链接" |
| | ChatUI | 1. 接收观众发送的消息或弹幕<br>2. 展示接收到的聊天消息 | "任一观众可发送聊天消息或弹幕"；"系统将消息广播，并在聊天区展示" |
| | RoomDismissalUI | 提示解散房间的不可恢复后果并请求确认 | "系统提示不可恢复的后果并请求确认" |
| **控制类** | RoomCreationController | 1. 校验创建参数合法性<br>2. 创建观影室并生成唯一标识<br>3. 设置创建者身份和权限 | "系统校验参数合法性"；"系统创建观影室，生成唯一标识"；"设置该昵称由为创建者" |
| | VideoStateController | 1. 初始化VideoState对象<br>2. 更新VideoState为唯一真实数据源<br>3. 维护播放状态转换（如：设置为'播放中'） | "系统初始化视频状态对象"；"系统更新VideoState，作为新的'唯一真实数据源'" |
| | SyncEventController | 1. 生成同步事件(Sync_Event)<br>2. 向房间内所有观众广播事件 | "系统生成Sync_Event(PLAY)并广播"；"向房间内所有观众发布Sync_Event" |
| | JoinController | 1. 建立实时连接并加入在线列表<br>2. 广播"观众加入"通知 | "为观众建立实时连接，将其加入在线成员列表"；"系统向成员广播'观众加入'通知" |
| | SyncInitializationController | 读取VideoState并向下发初始化数据 | "系统读取VideoState并向新加入观众下发初始化数据" |
| | PlaybackController | 1. 验证创建者权限与状态<br>2. 验证控制操作的发起者权限及参数有效性 | "系统验证放映厅创建者权限与连接状态"；"验证发起者具有权限，且参数有效" |
| | ChatController | 1. 验证消息内容合规性<br>2. 将消息广播给在线成员 | "系统验证消息内容合规"；"系统将消息广播给房间内在线成员" |
| | VideoSourceController | 1. 验证外部链接格式及可达性<br>2. 更换视频源并通知创建者 | "系统验证该链接格式及可达性"；"系统更换当前视频源，通知创建者已就绪" |
| | RoomDismissalController | 1. 强制断开所有连接<br>2. 销毁房间实例及其VideoState | "强制断开所有成员连接，停止广播"；"销毁房间实例及其VideoState" |
| **实体类** | Room | 存储房间基本信息（ID、配置等） | "系统创建新的线上观影室，生成唯一标识" |
| | VideoState | 存储当前视频源、播放状态、进度、倍速、字幕 | "系统初始化视频状态对象(VideoState)" |
| | User | 存储用户身份信息（昵称、权限等） | "将该昵称设置为该房间的'放映厅创建者'" |
| | Participant | 记录用户在房间中的参与状态（连接情况等） | "将其加入房间在线成员列表" |
| | Message | 存储聊天消息的内容、发送者、时间等 | "任一观众可发送聊天消息或弹幕" |
| | SyncEvent | 封装同步指令（播放/跳转等）及参数 | "系统生成Sync_Event(PLAY)并广播" |
